%-------实信号变成复信号（对正交下变频和希尔伯特变换的理解）------%
clc; close all;
fs=1e4;
t=0:1/fs:0.1-1/fs;
f1=2000;
f2=3000;
y=exp(1i*2*pi*f1*t)+3*exp(1i*2*pi*f2*t);
Y=fftshift(fft(y));
L=length(Y);
P=2*abs(Y)/L;
f=(0:L-1)*fs/L-fs/2;
figure(1)
subplot(211);plot(t,real(y));title('最终效果图');
% subplot(212);plot(t,imag(y));
 subplot(212);plot(f,P);
 
 
%---------------如何得到上述波形----------------%
% 法一：正交下变频 零中频信号，频率以0为中点
s=cos(2*pi*f1*t)+3*cos(2*pi*f2*t);
S=fftshift(fft(s));
L=length(S);
P1=2*abs(S)/L;
f=(0:L-1)*fs/L-fs/2;
figure(2)
subplot(211);plot(t,real(s));title('实数信号');
% subplot(212);plot(t,imag(y));
 subplot(212);plot(f,P1);
fc=(f1+f2)/2;    %本振信号频率
y1=s.*cos(2*pi*fc*t);  % I路
y2=s.*sin(2*pi*fc*t);  % Q路
%-------低通滤波
h=[7.06924427212765e-06,0.000979250467960222,0.00389055525764410,0.00882408645583282,0.0134900298725086,0.0138225165488970,0.00719473432777580,-0.00388046997821120,-0.0117138077937784,-0.00904913408778445,0.00338368992394388,0.0149717909077938,0.0132337222657467,-0.00352884116137712,-0.0212221955733370,-0.0205163108085362,0.00364334015176192,0.0319263541729526,0.0336598152447221,-0.00369303114652136,-0.0541397063396323,-0.0647617385746685,0.00371852099096234,0.138528936276417,0.273215826563305,0.329604322972122,0.273215826563305,0.138528936276417,0.00371852099096234,-0.0647617385746685,-0.0541397063396323,-0.00369303114652136,0.0336598152447221,0.0319263541729526,0.00364334015176192,-0.0205163108085362,-0.0212221955733370,-0.00352884116137712,0.0132337222657467,0.0149717909077938,0.00338368992394388,-0.00904913408778445,-0.0117138077937784,-0.00388046997821120,0.00719473432777580,0.0138225165488970,0.0134900298725086,0.00882408645583282,0.00389055525764410,0.000979250467960222,7.06924427212765e-06];
y1_filter=filter(h,1,y1);
y2_filter=filter(h,1,y2);
y=y1_filter-1i*y2_filter;
Y=fftshift(fft(y));
L=length(Y);
P=2*abs(Y)/L;
f=(0:L-1)*fs/L-fs/2;
figure(3)
subplot(211);plot(t,real(y));title('正交下变频');
subplot(212);plot(f,P);

% 法二：希尔伯特变换
y2=hilbert(s);
Y2=fftshift(fft(y2));
L=length(Y2);
P2=2*abs(Y2)/L;
f=(0:L-1)*fs/L-fs/2;
figure(4)
subplot(211);plot(t,real(y));title('希尔伯特变换');
subplot(212);plot(f,P2);